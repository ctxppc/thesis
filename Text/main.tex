% © 2021–2022 Constantino Tsarouhas
\documentclass[master=cws, oneside, english, extralanguage=dutch]{kulemt}	% TODO: twoside for print
\setup{
	masteroption=vs,
	title={A CHERI-RISC-V nanopass compiler for iterating quickly on secure calling conventions},
	author={Constantino Tsarouhas},
	promotor={(…) Dominique Devriese},							% TODO: Title
	assistant={(…) Sander Huyghebaert \and (…) Steven Keuchel},	% TODO: Titles
	assessor=,	% TODO
	inputenc=utf8,
	font=utopia
}

\usepackage{babel}						% Language support
\usepackage[autostyle=true]{csquotes}	% Curly quotes
\usepackage[dvipsnames]{xcolor}			% Named colours — keep before hyperref!
\usepackage{hyperref}					% Hyperlinking and PDF metadata.
\usepackage[toc]{glossaries}			% Glossary — keep after hyperref!
\usepackage{lipsum}						% Fake lorem ipsum text
\usepackage{subfiles}					% Modular documents
\usepackage{todonotes}					% Marks TODOs
\usepackage{xparse}						% Advanced command parsing (used in newdualentry)

\hypersetup{
    colorlinks=true,		% false: boxed links; true: coloured links
    linkcolor=Blue,			% colour of internal links
    citecolor=OliveGreen,	% colour of links to bibliography
    filecolor=cyan,			% colour of file links
    urlcolor=magenta		% colour of external links
}

\newcommand{\onlyinsubfile}[1]{#1}
\newcommand{\notinsubfile}[1]{}

\DeclareDocumentCommand{\newdualentry}{ O{} O{} m m m m } {
	\newglossaryentry{gls-#3}{name={#5},text={#5\glsadd{#3}},
	description={#6},#1
	}
	\makeglossaries
	\newacronym[see={{gls-#3}},#2]{#3}{#4}{#5\glsadd{gls-#3}}
}

\def\biblio{\bibliographystyle{apalike}\bibliography{References}}

\input{glossary.tex}

\begin{document}

\renewcommand{\onlyinsubfile}[1]{}
\renewcommand{\notinsubfile}[1]{#1}
\def\biblio{}

\begin{preface}
	\lipsum[5]
	\todo{Write something funny here}
\end{preface}

\tableofcontents*

\begin{abstract}
	\lipsum[5]
	\todo{Write something serious here}
\end{abstract}

\begin{abstract*}
	\lipsum[5]
	\todo{5 pagina's goud hier a.u.b.}
\end{abstract*}

\mainmatter
\subfile{background}
\subfile{glyco}

\backmatter
\glsaddall
\setglossarystyle{list}
\printglossaries

\bibliographystyle{apalike}
\bibliography{References}

\end{document}
